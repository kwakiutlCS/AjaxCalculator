<!DOCTYPE html>

<!-- Nuno Ferreira e Pedro Rodrigues -->

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">

<h:head>
	<h:outputStylesheet name="style.css" library="css" />
	<h:outputScript name="stats.js" library="js" />
</h:head>

<h:body>
	
	<ui:include src="navBar.xhtml" />


	<h:form id="calculatorForm">
		<!--         Caixa que contém as estatísticas das operações. Interage com o bean statistics. -->
		<h:selectOneListbox styleClass="statsbox" id="statsBox">
			<f:selectItems value="#{statistics.stats}" />
		</h:selectOneListbox>
		<h:commandButton value="submit" action="null" id="statsRefresher"
			style="display:none">
			<f:ajax render="statsBox" />
		</h:commandButton>


		<h:panelGroup rendered="#{!mode.modeAdvanced or mode.mode lt 2}">
			<h:dataTable value="#{history.listEntry}" var="entry"
				style="background:white;">
				<h:column>
					<h:commandLink value="#{entry.expression}"
						action="#{calculator.submitOp(entry.expression)}" />
				</h:column>
				<h:column>
					<h:commandLink value="#{entry.result}"
						action="#{calculator.submitOp(entry.result)}" />
				</h:column>
				<h:column>#{entry.deltaT}</h:column>
			</h:dataTable>
		</h:panelGroup>

		<f:ajax render="@form">
			<h:panelGroup id="pointList"
				rendered="#{mode.modeAdvanced and mode.mode == 2}">
				<ui:repeat var="p" value="#{experimentalSet.points}">
					<div>
						<span>#{p.x}</span> <span>#{p.y}</span> <span><h:commandLink
								action="#{experimentalSet.remove(p.id)}" value="remove" /></span>
					</div>
				</ui:repeat>
			</h:panelGroup>
		</f:ajax>

		<!-- 		Caixa que contém as funções da calculadora e o display que vai mostrando os números, operações e funções inseridas.			 -->
		<div class="calculator">


			<div class="display">
				<h:outputText id="displayScreen" value="#{screen.expression}"
					styleClass="displayScreen" />
			</div>

			<div class="buttons">

				<ui:insert name="modeSelection" />

				<div id="graurad">Nuno Ferreira Pedro Rodrigues</div>

				<f:ajax>
					<h:selectOneRadio value="#{angleUnitList.chosen}"
						rendered="#{mode.modeAdvanced and mode.mode lt 2}">
						<f:selectItems value="#{angleUnitList.angles}" var="item"
							itemLabel="#{item.name}" itemValue="#{item.name}" />
					</h:selectOneRadio>
				</f:ajax>

				<ui:insert name="keyboard" />


			</div>
		</div>


	</h:form>




</h:body>
</html>